<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Quản lý Bài kiểm tra</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>
    <div class="container mt-5">
        <h1 class="mb-4">Quản lý Bài kiểm tra</h1>
        <p th:if="${toastMessage}" th:classappend="${toastType == 'success' ? 'text-success' : 'text-danger'}"
            th:text="${toastMessage}"></p>

        <a th:href="@{/autism-test/teacher/create-test}" class="btn btn-primary mb-3">Tạo Bài kiểm tra Mới</a>

        <h2 class="mt-4">Danh sách Bài kiểm tra của bạn</h2>
        <div th:if="${tests.isEmpty()}">
            <p>Bạn chưa tạo bài kiểm tra nào.</p>
        </div>
        <ul class="list-group" th:if="${!tests.isEmpty()}">
            <li class="list-group-item" th:each="test : ${tests}">
                <p><strong>Tên Bài kiểm tra:</strong> <span th:text="${test.testName}"></span></p>
                <p><strong>Mô tả:</strong> <span th:text="${test.description}"></span></p>
                <p><strong>Độ tuổi:</strong> <span th:text="${test.ageRangeMin}"></span> - <span
                        th:text="${test.ageRangeMax}"></span></p>
                <p><strong>Trạng thái:</strong> <span th:text="${test.status}"></span></p>
                <p><strong>Ngày tạo:</strong> <span
                        th:text="${#temporals.format(test.createdAt, 'dd/MM/yyyy HH:mm')}"></span></p>
                <div>
                    <a th:href="@{/autism-test/teacher/manage-tests/{testId}/questions(testId=${test.id})}"
                        class="btn btn-info btn-sm me-2">Quản lý Câu hỏi</a>
                    <form th:if="${test.status.name() == 'DRAFT' || test.status.name() == 'INACTIVE'}"
                        th:action="@{/autism-test/teacher/test/{id}/activate(id=${test.id})}" method="post"
                        style="display: inline;">
                        <button type="submit" class="btn btn-success btn-sm me-2">Kích hoạt</button>
                    </form>
                    <form th:if="${test.status.name() == 'ACTIVE'}"
                        th:action="@{/autism-test/teacher/test/{id}/deactivate(id=${test.id})}" method="post"
                        style="display: inline;">
                        <button type="submit" class="btn btn-warning btn-sm me-2">Hủy kích hoạt</button>
                    </form>
                    <form th:action="@{/autism-test/teacher/test/{id}/delete(id=${test.id})}" method="post"
                        style="display: inline;"
                        onsubmit="return confirm('Bạn có chắc chắn muốn xóa bài kiểm tra này?');">
                        <button type="submit" class="btn btn-danger btn-sm">Xóa</button>
                    </form>
                </div>
            </li>
        </ul>
    </div>
</body>

</html>